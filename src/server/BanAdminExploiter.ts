import { Players } from "@rbxts/services";
import { GameDefinitions } from "shared/data/GameDefinitions";

/** If the player is not an admin, bans him and returns true */
export const isNotAdmin_AutoBanned = (player: Player, commandName: string): boolean => {
	if (GameDefinitions.isAdmin(player)) return false;
	if (GameDefinitions.isRobloxEngineer(player)) return false;

	$warn(`Player ${player.Name} tried to invoke an admin command ${commandName}`);
	// task.spawn(() => {
	// 	DiscordWebhook.sendMessage({
	// 		content: `Player ${player.Name} tried to invoke an admin command ${commandName}`,
	// 	});
	// });

	Players.BanAsync({
		UserIds: [player.UserId],
		Duration: -1,
		DisplayReason: "Exploiting",
		PrivateReason: `Exploiting, Banned automatically for trying to run "${commandName}"`,
	});
	return true;
};
